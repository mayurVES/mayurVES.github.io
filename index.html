<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Special Person!</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600;700;900&display=swap');

        /* Magical Night Flowers Styles */
        *,
        *::after,
        *::before {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        :root {
            --dark-color: #000;
        }

        .page-0 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 4;
            background-color: var(--dark-color);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            overflow: hidden;
            perspective: 1000px;
        }

        .night {
            position: fixed;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
            width: 100%;
            height: 100%;
            filter: blur(0.1vmin);
            background-image: radial-gradient(
                    ellipse at top,
                    transparent 0%,
                    var(--dark-color)
                ),
                radial-gradient(
                    ellipse at bottom,
                    var(--dark-color),
                    rgba(145, 233, 255, 0.2)
                ),
                repeating-linear-gradient(
                    220deg,
                    rgb(0, 0, 0) 0px,
                    rgb(0, 0, 0) 19px,
                    transparent 19px,
                    transparent 22px
                ),
                repeating-linear-gradient(
                    189deg,
                    rgb(0, 0, 0) 0px,
                    rgb(0, 0, 0) 19px,
                    transparent 19px,
                    transparent 22px
                ),
                repeating-linear-gradient(
                    148deg,
                    rgb(0, 0, 0) 0px,
                    rgb(0, 0, 0) 19px,
                    transparent 19px,
                    transparent 22px
                ),
                linear-gradient(90deg, rgb(0, 255, 250), rgb(240, 240, 240));
        }

        /* Flower Styles */
        .flowers {
            position: relative;
            transform: scale(0.9);
        }

        .flower {
            position: absolute;
            bottom: 10vmin;
            transform-origin: bottom center;
            z-index: 10;
            --fl-speed: 0.8s;
        }

        .flower--1 {
            animation: moving-flower-1 4s linear infinite;
        }

        .flower--2 {
            left: 50%;
            transform: rotate(20deg);
            animation: moving-flower-2 4s linear infinite;
        }

        .flower--3 {
            left: 50%;
            transform: rotate(-15deg);
            animation: moving-flower-3 4s linear infinite;
        }

        /* Flower Components */
        .flower__leafs {
            position: relative;
            animation: blooming-flower 2s backwards;
        }

        .flower__leaf {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 8vmin;
            height: 11vmin;
            border-radius: 51% 49% 47% 53% / 44% 45% 55% 69%;
            background-color: #a7ffee;
            background-image: linear-gradient(to top, #54b8aa, #a7ffee);
            transform-origin: bottom center;
            opacity: 0.9;
            box-shadow: inset 0 0 2vmin rgba(255, 255, 255, 0.5);
        }

        .flower__leaf--1 {
            transform: translate(-10%, 1%) rotateY(40deg) rotateX(-50deg);
        }

        .flower__leaf--2 {
            transform: translate(-50%, -4%) rotateX(40deg);
        }

        .flower__leaf--3 {
            transform: translate(-90%, 0%) rotateY(45deg) rotateX(50deg);
        }

        .flower__leaf--4 {
            width: 8vmin;
            height: 8vmin;
            transform-origin: bottom left;
            border-radius: 4vmin 10vmin 4vmin 4vmin;
            transform: translate(-0%, 18%) rotateX(70deg) rotate(-43deg);
            background-image: linear-gradient(to top, #39c6d6, #a7ffee);
            z-index: 1;
            opacity: 0.8;
        }

        .flower__white-circle {
            position: absolute;
            left: -3.5vmin;
            top: -3vmin;
            width: 9vmin;
            height: 4vmin;
            border-radius: 50%;
            background-color: #fff;
        }

        .flower__line {
            height: 55vmin;
            width: 1.5vmin;
            background-image: linear-gradient(
                    to left,
                    rgb(0, 0, 0, 0.2),
                    transparent,
                    rgba(255, 255, 255, 0.2)
                ),
                linear-gradient(to top, transparent 10%, #14757a, #39c6d6);
            box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.5);
            animation: grow-flower-tree 4s backwards;
        }

        .flower__line__leaf {
            --w: 7vmin;
            --h: calc(var(--w) + 2vmin);
            position: absolute;
            top: 20%;
            left: 90%;
            width: var(--w);
            height: var(--h);
            border-top-right-radius: var(--h);
            border-bottom-left-radius: var(--h);
            background-image: linear-gradient(
                to top,
                rgba(20, 117, 122, 0.4),
                #39c6d6
            );
        }

        .flower__line__leaf--1 {
            transform: rotate(70deg) rotateY(30deg);
            animation: blooming-leaf-right var(--fl-speed) 1.6s backwards;
        }

        .flower__line__leaf--2 {
            top: 45%;
            transform: rotate(70deg) rotateY(30deg);
            animation: blooming-leaf-right var(--fl-speed) 1.4s backwards;
        }

        .flower__line__leaf--3 {
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            border-top-left-radius: var(--h);
            border-bottom-right-radius: var(--h);
            left: -460%;
            top: 12%;
            transform: rotate(-70deg) rotateY(30deg);
            animation: blooming-leaf-left var(--fl-speed) 1.2s backwards;
        }

        .flower__line__leaf--4 {
            top: 40%;
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            border-top-left-radius: var(--h);
            border-bottom-right-radius: var(--h);
            left: -460%;
            transform: rotate(-70deg) rotateY(30deg);
            animation: blooming-leaf-left var(--fl-speed) 1s backwards;
        }

        /* Light Effects */
        .flower__light {
            position: absolute;
            bottom: 0vmin;
            width: 1vmin;
            height: 1vmin;
            background-color: rgb(255, 251, 0);
            border-radius: 50%;
            filter: blur(0.2vmin);
            animation: light-ans 4s linear infinite backwards;
        }

        .flower__light:nth-child(odd) {
            background-color: #23f0ff;
        }

        .flower__light--1 { left: -2vmin; animation-delay: 1s; }
        .flower__light--2 { left: 3vmin; animation-delay: 0.5s; }
        .flower__light--3 { left: -6vmin; animation-delay: 0.3s; }
        .flower__light--4 { left: 6vmin; animation-delay: 0.9s; }
        .flower__light--5 { left: -1vmin; animation-delay: 1.5s; }
        .flower__light--6 { left: -4vmin; animation-delay: 3s; }
        .flower__light--7 { left: 3vmin; animation-delay: 2s; }
        .flower__light--8 { left: -6vmin; animation-delay: 3.5s; }

        /* Grass Styles */
        .flower__grass {
            --c: #159faa;
            --line-w: 1.5vmin;
            position: absolute;
            bottom: 12vmin;
            left: -7vmin;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            z-index: 20;
            transform-origin: bottom center;
            transform: rotate(-48deg) rotateY(40deg);
        }

        .flower__grass--1 {
            animation: moving-grass 2s linear infinite;
        }

        .flower__grass--2 {
            left: 2vmin;
            bottom: 10vmin;
            transform: scale(0.5) rotate(75deg) rotateX(10deg) rotateY(-200deg);
            opacity: 0.8;
            z-index: 0;
            animation: moving-grass--2 1.5s linear infinite;
        }

        .flower__grass--top {
            width: 7vmin;
            height: 10vmin;
            border-top-right-radius: 100%;
            border-right: var(--line-w) solid var(--c);
            transform-origin: bottom center;
            transform: rotate(-2deg);
        }

        .flower__grass--bottom {
            margin-top: -2px;
            width: var(--line-w);
            height: 25vmin;
            background-image: linear-gradient(to top, transparent, var(--c));
        }

        .flower__grass__leaf {
            --size: 10vmin;
            position: absolute;
            width: calc(var(--size) * 2.1);
            height: var(--size);
            border-top-left-radius: var(--size);
            border-top-right-radius: var(--size);
            background-image: linear-gradient(
                to top,
                transparent,
                transparent 30%,
                var(--c)
            );
            z-index: 100;
        }

        /* Grass Leaf Animations */
        .flower__grass__leaf--1 {
            top: -6%;
            left: 30%;
            --size: 6vmin;
            transform: rotate(-20deg);
            animation: growing-grass-ans--1 2s 2.6s backwards;
        }

        .flower__grass__leaf--2 {
            top: -5%;
            left: -110%;
            --size: 6vmin;
            transform: rotate(10deg);
            animation: growing-grass-ans--2 2s 2.4s linear backwards;
        }

        .flower__grass__leaf--3 {
            top: 5%;
            left: 60%;
            --size: 8vmin;
            transform: rotate(-18deg) rotateX(-20deg);
            animation: growing-grass-ans--3 2s 2.2s linear backwards;
        }

        .flower__grass__leaf--4 {
            top: 6%;
            left: -135%;
            --size: 8vmin;
            transform: rotate(2deg);
            animation: growing-grass-ans--4 2s 2s linear backwards;
        }

        .flower__grass__leaf--5 {
            top: 20%;
            left: 60%;
            --size: 10vmin;
            transform: rotate(-24deg) rotateX(-20deg);
            animation: growing-grass-ans--5 2s 1.8s linear backwards;
        }

        .flower__grass__leaf--6 {
            top: 22%;
            left: -180%;
            --size: 10vmin;
            transform: rotate(10deg);
            animation: growing-grass-ans--6 2s 1.6s linear backwards;
        }

        .flower__grass__leaf--7 {
            top: 39%;
            left: 70%;
            --size: 10vmin;
            transform: rotate(-10deg);
            animation: growing-grass-ans--7 2s 1.4s linear backwards;
        }

        .flower__grass__leaf--8 {
            top: 40%;
            left: -215%;
            --size: 11vmin;
            transform: rotate(10deg);
            animation: growing-grass-ans--8 2s 1.2s linear backwards;
        }

        .flower__grass__overlay {
            position: absolute;
            top: -10%;
            right: 0%;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            filter: blur(1.5vmin);
            z-index: 100;
        }

        /* Animations */
        @keyframes moving-flower-1 {
            0%, 100% { transform: rotate(2deg); }
            50% { transform: rotate(-2deg); }
        }

        @keyframes moving-flower-2 {
            0%, 100% { transform: rotate(18deg); }
            50% { transform: rotate(14deg); }
        }

        @keyframes moving-flower-3 {
            0%, 100% { transform: rotate(-18deg); }
            50% { transform: rotate(-20deg) rotateY(-10deg); }
        }

        @keyframes blooming-flower {
            0% { transform: scale(0); }
        }

        @keyframes grow-flower-tree {
            0% {
                height: 0;
                border-radius: 1vmin;
            }
        }

        @keyframes blooming-leaf-right {
            0% {
                transform-origin: left;
                transform: rotate(70deg) rotateY(30deg) scale(0);
            }
        }

        @keyframes blooming-leaf-left {
            0% {
                transform-origin: right;
                transform: rotate(-70deg) rotateY(30deg) scale(0);
            }
        }

        @keyframes light-ans {
            0% {
                opacity: 0;
                transform: translateY(0vmin);
            }
            25% {
                opacity: 1;
                transform: translateY(-5vmin) translateX(-2vmin);
            }
            50% {
                opacity: 1;
                transform: translateY(-15vmin) translateX(2vmin);
                filter: blur(0.2vmin);
            }
            75% {
                transform: translateY(-20vmin) translateX(-2vmin);
                filter: blur(0.2vmin);
            }
            100% {
                transform: translateY(-30vmin);
                opacity: 0;
                filter: blur(1vmin);
            }
        }

        @keyframes moving-grass {
            0%, 100% { transform: rotate(-48deg) rotateY(40deg); }
            50% { transform: rotate(-50deg) rotateY(40deg); }
        }

        @keyframes moving-grass--2 {
            0%, 100% { transform: scale(0.5) rotate(75deg) rotateX(10deg) rotateY(-200deg); }
            50% { transform: scale(0.5) rotate(79deg) rotateX(10deg) rotateY(-200deg); }
        }

        .growing-grass {
            animation: growing-grass-ans 1s 2s backwards;
        }

        @keyframes growing-grass-ans {
            0% { transform: scale(0); }
        }

        @keyframes growing-grass-ans--1 {
            0% {
                transform-origin: bottom left;
                transform: rotate(-20deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--2 {
            0% {
                transform-origin: bottom right;
                transform: rotate(10deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--3 {
            0% {
                transform-origin: bottom left;
                transform: rotate(-18deg) rotateX(-20deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--4 {
            0% {
                transform-origin: bottom right;
                transform: rotate(2deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--5 {
            0% {
                transform-origin: bottom left;
                transform: rotate(-24deg) rotateX(-20deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--6 {
            0% {
                transform-origin: bottom right;
                transform: rotate(10deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--7 {
            0% {
                transform-origin: bottom left;
                transform: rotate(-10deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--8 {
            0% {
                transform-origin: bottom right;
                transform: rotate(10deg) scale(0);
            }
        }

        .not-loaded * {
            animation-play-state: paused !important;
        }

        /* Original styles */
        body {
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            background-color: #fdf2f8;
        }

        .fancy-text {
            font-family: 'Dancing Script', cursive;
        }

        .page {
            height: 100vh;
            width: 100vw;
            position: fixed;
            top: 0;
            left: 0;
            transition: transform 0.8s cubic-bezier(0.65, 0, 0.35, 1);
        }

        .page-1 {
            z-index: 3;
            background: linear-gradient(135deg, #f9a8d4, #f472b6);
        }

        .page-2 {
            z-index: 2;
            transform: translateX(100%);
            background: linear-gradient(135deg, #c4b5fd, #818cf8);
        }

        .page-3 {
            z-index: 1;
            transform: translateX(100%);
            background: linear-gradient(135deg, #a7f3d0, #6ee7b7);
            overflow-y: auto;
        }

        .page-4 {
            z-index: 0;
            transform: translateX(100%);
            background: linear-gradient(135deg, #fce7f3, #fbcfe8);
            overflow-y: auto;
        }

        .page-5 {
            z-index: -1;
            transform: translateX(100%);
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .final-message {
            text-align: center;
            color: #8B4513;
            max-width: 800px;
            margin: 0 auto;
        }

        .final-message h1 {
            font-size: 4rem;
            margin-bottom: 2rem;
            animation: bounce 2s infinite;
        }

        .final-message p {
            font-size: 2rem;
            margin-bottom: 1rem;
            opacity: 0;
            animation: fadeInUp 1s forwards;
            animation-delay: 1s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .page-3 {
                padding: 20px 0;
            }
            
            .page-3 .max-w-2xl {
                margin: 0 15px;
            }
        }

        .big-date {
            font-size: 5rem;
            font-weight: 900;
            color: white;
            text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        @media (max-width: 640px) {
            .big-date {
                font-size: 3rem;
            }
        }

        .memory-img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 12px;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .memory-img:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .fullscreen-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            z-index: 100;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .fullscreen-img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 8px;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 2rem;
            cursor: pointer;
        }

        .option-btn {
            transition: all 0.3s ease;
        }

        .option-btn:hover {
            transform: translateY(-5px);
        }

        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            pointer-events: none;
        }

        .balloon {
            position: absolute;
            width: 40px;
            height: 50px;
            background-color: #ff6b6b;
            border-radius: 50%;
            bottom: -50px;
            animation: float 15s infinite linear;
        }

        .balloon::before {
            content: '';
            position: absolute;
            width: 5px;
            height: 50px;
            background-color: rgba(0,0,0,0.2);
            bottom: -45px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 5px;
        }

        /* New decorative elements styles */
        .party-element {
            position: absolute;
            pointer-events: none;
            opacity: 0;
            will-change: transform, opacity;
            animation: floatElement 12s infinite cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(100vh) rotate(0deg) scale(1);
        }

        .cake-icon {
            width: 40px;
            height: 40px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff69b4"><path d="M12 6a2 2 0 0 0 2-2c0-.38-.1-.73-.29-1.03L12 0l-1.71 2.97c-.19.3-.29.65-.29 1.03 0 1.1.9 2 2 2zm6 3h-5V7h-2v2H6c-1.66 0-3 1.34-3 3v9c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-9c0-1.66-1.34-3-3-3z"/></svg>') no-repeat center center;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        .gift-icon {
            width: 35px;
            height: 35px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23a855f7"><path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5-2.22A2.996 2.996 0 0 0 8 5c0 .35.07.69.18 1H6c-1.1 0-2 .9-2 2v3c0 .55.45 1 1 1h1v7c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2v-7h1c.55 0 1-.45 1-1V8c0-1.1-.9-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"/></svg>') no-repeat center center;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        .confetti {
            width: 12px;
            height: 12px;
            background-color: #ffeb3b;
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        @keyframes floatElement {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(1);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-20vh) rotate(360deg) scale(0.8);
                opacity: 0;
            }
        }

        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 10;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        #three-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .celebrate-text {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Birthday Text Styles */
        .birthday-text {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Dancing Script', cursive;
            font-size: 4rem;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            opacity: 0;
            animation: fadeInText 1s ease forwards 3s;
            z-index: 30;
        }

        /* Glass Effect Button */
        .next-button {
            position: absolute;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            padding: 1rem 2rem;
            font-size: 1.2rem;
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 30px;
            cursor: pointer;
            opacity: 0;
            animation: fadeInButton 1s ease forwards 3.5s;
            transition: all 0.3s ease;
            z-index: 30;
        }

        .next-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-50%) translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        @keyframes fadeInText {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        @keyframes fadeInButton {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }
    </style>
</head>
<body class="not-loaded">
    <!-- Page 0: Magical Night Flowers -->
    <div class="page page-0">
        <div class="night"></div>
        <h1 class="birthday-text">Happy Birthday!</h1>
        <button class="next-button">Continue →</button>
        <div class="flowers">
            <!-- Flower elements -->
            <div class="flower flower--1">
                <div class="flower__leafs flower__leafs--1">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
                <!-- Add light elements -->
                <div class="flower__light flower__light--1"></div>
                <div class="flower__light flower__light--2"></div>
                <div class="flower__light flower__light--3"></div>
                <div class="flower__light flower__light--4"></div>
                <div class="flower__light flower__light--5"></div>
                <div class="flower__light flower__light--6"></div>
                <div class="flower__light flower__light--7"></div>
                <div class="flower__light flower__light--8"></div>
            </div>

            <div class="flower flower--2">
                <div class="flower__leafs flower__leafs--2">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
                <!-- Add light elements -->
                <div class="flower__light flower__light--1"></div>
                <div class="flower__light flower__light--2"></div>
                <div class="flower__light flower__light--3"></div>
                <div class="flower__light flower__light--4"></div>
                <div class="flower__light flower__light--5"></div>
                <div class="flower__light flower__light--6"></div>
                <div class="flower__light flower__light--7"></div>
                <div class="flower__light flower__light--8"></div>
            </div>

            <div class="flower flower--3">
                <div class="flower__leafs flower__leafs--3">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                    <div class="flower__line__leaf flower__line__leaf--4"></div>
                </div>
                <!-- Add light elements -->
                <div class="flower__light flower__light--1"></div>
                <div class="flower__light flower__light--2"></div>
                <div class="flower__light flower__light--3"></div>
                <div class="flower__light flower__light--4"></div>
                <div class="flower__light flower__light--5"></div>
                <div class="flower__light flower__light--6"></div>
                <div class="flower__light flower__light--7"></div>
                <div class="flower__light flower__light--8"></div>
            </div>

            <!-- Add grass elements -->
            <div class="flower__grass flower__grass--1">
                <div class="flower__grass--top"></div>
                <div class="flower__grass--bottom"></div>
                <div class="flower__grass__leaf flower__grass__leaf--1"></div>
                <div class="flower__grass__leaf flower__grass__leaf--2"></div>
                <div class="flower__grass__leaf flower__grass__leaf--3"></div>
                <div class="flower__grass__leaf flower__grass__leaf--4"></div>
                <div class="flower__grass__leaf flower__grass__leaf--5"></div>
                <div class="flower__grass__leaf flower__grass__leaf--6"></div>
                <div class="flower__grass__leaf flower__grass__leaf--7"></div>
                <div class="flower__grass__leaf flower__grass__leaf--8"></div>
                <div class="flower__grass__overlay"></div>
            </div>

            <div class="flower__grass flower__grass--2">
                <div class="flower__grass--top"></div>
                <div class="flower__grass--bottom"></div>
                <div class="flower__grass__leaf flower__grass__leaf--1"></div>
                <div class="flower__grass__leaf flower__grass__leaf--2"></div>
                <div class="flower__grass__leaf flower__grass__leaf--3"></div>
                <div class="flower__grass__leaf flower__grass__leaf--4"></div>
                <div class="flower__grass__leaf flower__grass__leaf--5"></div>
                <div class="flower__grass__leaf flower__grass__leaf--6"></div>
                <div class="flower__grass__leaf flower__grass__leaf--7"></div>
                <div class="flower__grass__leaf flower__grass__leaf--8"></div>
                <div class="flower__grass__overlay"></div>
            </div>
        </div>
    </div>

    <!-- Page 1: Birthday Date & Entry Challenge -->
    <div class="page page-1 flex flex-col items-center justify-center p-4">
        <div id="party-container"></div>
        <h1 class="text-4xl md:text-6xl text-white fancy-text mb-6 text-center">It's Birthday Time!</h1>
        
        <div id="date-container" class="flex flex-col items-center mb-8">
            <div class="big-date celebrate-text mb-4">27 MARCH</div>
            <p class="text-xl text-white text-center">The day we celebrate you!</p>
        </div>
        
        <div id="challenge-container" class="flex flex-col items-center bg-white bg-opacity-20 backdrop-blur-md p-8 rounded-lg max-w-md w-full">
            <h2 class="text-2xl md:text-3xl text-white mb-6 text-center">What does Vedant call you?</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                <button class="option-btn bg-white text-pink-500 font-bold py-4 px-6 rounded-lg shadow-lg hover:bg-pink-100 transition" data-option="Shrawani">Shrawani</button>
                <button class="option-btn bg-white text-pink-500 font-bold py-4 px-6 rounded-lg shadow-lg hover:bg-pink-100 transition" data-option="Shrw">Shrw</button>
                <button class="option-btn bg-white text-pink-500 font-bold py-4 px-6 rounded-lg shadow-lg hover:bg-pink-100 transition" data-option="Shranu Didi">Shranu Didi</button>
                <button class="option-btn bg-white text-pink-500 font-bold py-4 px-6 rounded-lg shadow-lg hover:bg-pink-100 transition" data-option="Gulab Jamun">Gulab Jamun</button>
            </div>
            <p id="error-message" class="mt-6 text-white text-center text-lg hidden">That's not right! Try again, sweetie! 😄</p>
        </div>

        <!-- Add Back Button -->
        <button id="back-to-page0" class="mt-8 bg-white text-pink-500 font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-pink-100 transition">← Back to Flowers</button>
    </div>

    <!-- Page 2: Wall of Memories -->
    <div class="page page-2 p-6 overflow-y-auto">
        <h1 class="text-4xl md:text-6xl text-white fancy-text mb-8 text-center pt-8">My Point of View</h1>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto memory-grid">
            <!-- Memory Images -->
            <div class="memory-item">
                <img src="img1.jpeg" alt="Memory 1" class="memory-img">
                <p class="text-white text-center mt-2">My Favourite thing</p>
            </div>
            <div class="memory-item">
                <img src="img2.jpeg" alt="Memory 2" class="memory-img">
                <p class="text-white text-center mt-2">Home-made Pathaka</p>
            </div>
            <div class="memory-item">
                <img src="img3.jpeg" alt="Memory 3" class="memory-img">
                <p class="text-white text-center mt-2">Pookie</p>
            </div>
            <div class="memory-item">
                <img src="img4.jpeg" alt="Memory 4" class="memory-img">
                <p class="text-white text-center mt-2">sun with sunshine</p>
            </div>
            <div class="memory-item">
                <img src="img5.jpeg" alt="Memory 5" class="memory-img">
                <p class="text-white text-center mt-2"> The Boss Bitch</p>
            </div>
            <div class="memory-item">
                <img src="img6.jpeg" alt="Memory 6" class="memory-img">
                <p class="text-white text-center mt-2">I forgot</p>
            </div>
        </div>
        
        <div class="flex justify-between items-center mt-8 mb-16 max-w-6xl mx-auto w-full px-6">
            <button id="prev-page-2" class="bg-white text-purple-500 font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-purple-100 transition">← Go Back</button>
            <button id="next-page-btn" class="bg-white text-purple-500 font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-purple-100 transition">Continue to Birthday Message →</button>
        </div>
    </div>

    <!-- Page 3: Important Message Page -->
    <div class="page page-3 flex flex-col items-center">
        <div class="w-full max-w-5xl mx-auto flex flex-col items-center py-8">
            <h1 class="text-3xl sm:text-4xl md:text-6xl fancy-text mb-8 text-center px-4" style="color: #8B4513;">✨ Happy Birthday, Shrawani! 🎉🎂✨</h1>
            
            <div class="max-w-2xl w-full bg-white bg-opacity-20 backdrop-blur-md p-4 sm:p-8 rounded-lg text-center">
                <p class="text-base sm:text-lg mb-6 leading-relaxed" style="color: #8B4513;">
                    Another year older, another year of ghosting me like it's your full-time job.  I seriously think you have a personal challenge to see how long you can make me wait for a reply. But somehow, even after all the "seen but not replied" moments, I still find myself looking forward to our random life talks and McD's iced coffee therapy sessions. ☕
                </p>
                <p class="text-base sm:text-lg mb-6 leading-relaxed" style="color: #8B4513;">
                    I don't know when it happened, but somewhere between ranting about life, laughing over nonsense, and you bossing me around, I realized—I kinda like your dominating nature. 😏 It's funny how you act all tough, but deep down, I know there's a soft side (even if I don't get to see it often because you're too busy pretending to be a boss-bitch 😂).
                </p>
                <p class="text-base sm:text-lg mb-6 leading-relaxed hidden" id="more-text" style="color: #8B4513;">
                    Jokes aside, you're one of the most important people in my life. You've seen me at my best and worst, yet somehow, you still tolerate me (barely, but still). No matter how many times you ignore my messages, I'll always be here, waiting for the day you finally reply on time—not getting my hopes up, though. 🙃<br><br>
                    Oh, and sometimes, I genuinely forget that you're my cousin… decoding that must be hard. 😆 But hey, life's full of mysteries, right?<br><br>
                    Happiest Birthday, Gulab Jamun! 🎈🎁 Now go enjoy your day, but don't forget—I expect a reply before your next birthday. 
                    And one more thing "I hate YOU"
                </p>
                <button id="reveal-btn" class="bg-white text-teal-500 font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-teal-100 transition">Read More ↓</button>
            </div>
            
            <div class="mt-8 mb-4">
                <div class="flex gap-4">
                    <button id="prev-page-3" class="bg-white text-teal-500 font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-teal-100 transition">← Back to Memories</button>
                    <button id="review-btn" class="bg-white text-teal-500 font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-teal-100 transition">Review Events →</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Page 4: Event Selection -->
    <div class="page page-4 flex flex-col items-center justify-center p-4">
        <div class="w-full max-w-5xl mx-auto flex flex-col items-center py-8">
            <h1 class="text-3xl sm:text-4xl md:text-6xl fancy-text mb-8 text-center px-4" style="color: #8B4513;">✨ SAUDE KI BAAT ✨</h1>
            
            <div class="flex gap-4 mb-8">
                <button id="back-to-memories" class="bg-white text-teal-500 font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-teal-100 transition">← Back to Memories</button>
            </div>

            <!-- Event Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-4xl">
                <!-- Party Card -->
                <div class="bg-white bg-opacity-20 backdrop-blur-md p-6 rounded-lg shadow-lg cursor-pointer hover:scale-105 transition-transform" id="party-card">
                    <h2 class="text-2xl fancy-text mb-4 text-center" style="color: #8B4513;">🎉 Party Time! 🎉</h2>
                    <p class="text-center" style="color: #8B4513;">Click to plan a party!</p>
                </div>

                <!-- Coffee Session Card -->
                <div class="bg-white bg-opacity-20 backdrop-blur-md p-6 rounded-lg shadow-lg cursor-pointer hover:scale-105 transition-transform" id="coffee-card">
                    <h2 class="text-2xl fancy-text mb-4 text-center" style="color: #8B4513;">☕ Coffee Session ☕</h2>
                    <p class="text-center" style="color: #8B4513;">Click for a coffee meetup!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Page 5: Final Message -->
    <div class="page page-5">
        <div class="final-message">
            <h1 class="fancy-text">Once again,Happy Birthday!</h1>
            <p class="fancy-text">See you soon!</p>
            <p class="fancy-text" style="animation-delay: 1.5s;">With love,</p>
            <p class="fancy-text" style="animation-delay: 2s;">Vedant ❤️</p>
        </div>
        <div class="flex gap-4 mt-8">
            <button id="back-to-events" class="bg-white text-amber-500 font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-amber-100 transition">← Back to Events</button>
        </div>
    </div>

    <!-- Party Form Modal -->
    <div id="party-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4 text-center" style="color: #8B4513;">🎉 Party Details 🎉</h3>
            <form id="party-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1" style="color: #8B4513;">Date</label>
                    <input type="date" name="date" required class="w-full p-2 rounded border border-pink-200 focus:outline-none focus:border-pink-400">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1" style="color: #8B4513;">Time</label>
                    <input type="time" name="time" required class="w-full p-2 rounded border border-pink-200 focus:outline-none focus:border-pink-400">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1" style="color: #8B4513;">Place</label>
                    <input type="text" name="place" required placeholder="Enter venue" class="w-full p-2 rounded border border-pink-200 focus:outline-none focus:border-pink-400">
                </div>
                <div class="flex gap-4">
                    <button type="submit" class="flex-1 bg-pink-500 text-white font-bold py-2 px-4 rounded hover:bg-pink-600 transition">Submit</button>
                    <button type="button" id="close-party-modal" class="flex-1 bg-gray-500 text-white font-bold py-2 px-4 rounded hover:bg-gray-600 transition">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Coffee Session Modal -->
    <div id="coffee-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4 text-center" style="color: #8B4513;">Kya yar kitni kanjoosi? 😄</h3>
            <button id="modal-ok-btn" class="w-full bg-pink-500 text-white font-bold py-2 px-4 rounded hover:bg-pink-600 transition">OK</button>
        </div>
    </div>

    <!-- Coffee Session Form Modal -->
    <div id="coffee-form-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4">
            <h3 class="text-xl font-bold mb-4 text-center" style="color: #8B4513;">☕ Coffee Session Details ☕</h3>
            <form id="coffee-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1" style="color: #8B4513;">Date</label>
                    <input type="date" name="date" required class="w-full p-2 rounded border border-pink-200 focus:outline-none focus:border-pink-400">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1" style="color: #8B4513;">Time</label>
                    <input type="time" name="time" required class="w-full p-2 rounded border border-pink-200 focus:outline-none focus:border-pink-400">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1" style="color: #8B4513;">Place</label>
                    <input type="text" name="place" required placeholder="Enter cafe name" class="w-full p-2 rounded border border-pink-200 focus:outline-none focus:border-pink-400">
                </div>
                <div class="flex gap-4">
                    <button type="submit" class="flex-1 bg-pink-500 text-white font-bold py-2 px-4 rounded hover:bg-pink-600 transition">Submit</button>
                    <button type="button" id="close-coffee-modal" class="flex-1 bg-gray-500 text-white font-bold py-2 px-4 rounded hover:bg-gray-600 transition">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Fullscreen Image Overlay -->
    <div class="fullscreen-overlay">
        <div class="close-btn">&times;</div>
        <img class="fullscreen-img" src="" alt="Fullscreen Image">
    </div>

    <!-- Music Control -->
    <div class="music-control">
        <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="block"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
        <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
    </div>

    <!-- Audio Element -->
    <audio id="bgMusic" loop autoplay>
        <source src="hbd.mp4" type="audio/mp4">
        <!-- Fallback text if audio cannot be played -->
        Your browser does not support the audio element.
    </audio>

    <!-- Add EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <script>
        // Global Variables
        const page0 = document.querySelector('.page-0');
        const page1 = document.querySelector('.page-1');
        const page2 = document.querySelector('.page-2');
        const page3 = document.querySelector('.page-3');
        const page4 = document.querySelector('.page-4');
        const page5 = document.querySelector('.page-5');
        const dateContainer = document.getElementById('date-container');
        const challengeContainer = document.getElementById('challenge-container');
        const errorMessage = document.getElementById('error-message');
        const optionButtons = document.querySelectorAll('.option-btn');
        const nextPageBtn = document.getElementById('next-page-btn');
        const revealBtn = document.getElementById('reveal-btn');
        const moreText = document.getElementById('more-text');
        const memoryImages = document.querySelectorAll('.memory-img');
        const fullscreenOverlay = document.querySelector('.fullscreen-overlay');
        const fullscreenImg = document.querySelector('.fullscreen-img');
        const closeBtn = document.querySelector('.close-btn');
        const bgMusic = document.getElementById('bgMusic');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');
        const musicControl = document.querySelector('.music-control');

        // Magical Night Flowers Script
        onload = () => {
            const c = setTimeout(() => {
                document.body.classList.remove("not-loaded");
                clearTimeout(c);
            }, 1000);
        };

        // Add new function to create party elements
        function createPartyElements() {
            const container = document.getElementById('party-container');
            const elements = ['cake-icon', 'gift-icon', 'confetti'];
            const colors = ['#ff69b4', '#a855f7', '#ffeb3b', '#4ade80', '#60a5fa'];
            
            // Clear existing elements
            container.innerHTML = '';
            
            // Create fewer elements for better performance
            for (let i = 0; i < 12; i++) {
                const element = document.createElement('div');
                const elementType = elements[Math.floor(Math.random() * elements.length)];
                element.classList.add('party-element', elementType);
                
                // Distribute elements across the width more evenly
                const xPos = (i / 12) * window.innerWidth + (Math.random() * 100 - 50);
                const delay = (i / 12) * 4; // More evenly distributed delays
                
                if (elementType === 'confetti') {
                    element.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                }
                
                element.style.left = `${xPos}px`;
                element.style.animationDelay = `${delay}s`;
                
                container.appendChild(element);
            }

            // Create new elements periodically
            setInterval(() => {
                if (container.children.length < 24) {  // Limit total number of elements
                    const element = document.createElement('div');
                    const elementType = elements[Math.floor(Math.random() * elements.length)];
                    element.classList.add('party-element', elementType);
                    
                    const xPos = Math.random() * window.innerWidth;
                    
                    if (elementType === 'confetti') {
                        element.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    }
                    
                    element.style.left = `${xPos}px`;
                    container.appendChild(element);
                    
                    // Remove element after animation completes
                    element.addEventListener('animationend', () => {
                        element.remove();
                    });
                }
            }, 2000);  // Add new element every 2 seconds
        }

        // Page Transitions
        function goToPage1() {
            gsap.to(page0, {
                x: '-100%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            gsap.to(page1, {
                x: '0%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            // Animate memory images
            gsap.from('.memory-item', {
                y: 50,
                opacity: 0,
                stagger: 0.1,
                duration: 0.8,
                delay: 0.8
            });
        }

        function goToPage2() {
            gsap.to(page1, {
                x: '-100%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            gsap.to(page2, {
                x: '0%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            // Create balloon animations for page 3
            createBalloons();
        }

        function goToPage3() {
            gsap.to(page2, {
                x: '-100%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            gsap.to(page3, {
                x: '0%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            // Create balloon animations for page 3
            createBalloons();
        }

        // Challenge Option Buttons
        optionButtons.forEach(button => {
            button.addEventListener('click', () => {
                const option = button.getAttribute('data-option');
                
                if (option === 'Gulab Jamun') {
                    gsap.to(button, {
                        scale: 1.2,
                        duration: 0.3,
                        onComplete: () => {
                            goToPage2();
                        }
                    });
                } else {
                    errorMessage.classList.remove('hidden');
                    gsap.from(errorMessage, {
                        y: -20,
                        opacity: 0,
                        duration: 0.5
                    });
                    
                    gsap.to(button, {
                        x: [10, -10, 10, -10, 0],
                        duration: 0.5,
                        ease: 'power1.inOut'
                    });
                }
            });
        });

        // Next Page Button
        nextPageBtn.addEventListener('click', () => {
            goToPage3();
        });

        // Back Navigation Buttons
        document.getElementById('prev-page-2').addEventListener('click', () => {
            gsap.to(page2, {
                x: '100%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            gsap.to(page1, {
                x: '0%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
        });

        document.getElementById('prev-page-3').addEventListener('click', () => {
            gsap.to(page3, {
                x: '100%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            gsap.to(page2, {
                x: '0%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
        });

        // Reveal Button
        revealBtn.addEventListener('click', () => {
            moreText.classList.remove('hidden');
            
            gsap.from(moreText, {
                y: 20,
                opacity: 0,
                duration: 1
            });
            
            revealBtn.classList.add('hidden');
        });

        // Fullscreen Image Functionality
        memoryImages.forEach(img => {
            img.addEventListener('click', () => {
                fullscreenImg.src = img.src;
                fullscreenOverlay.style.display = 'flex';
                
                gsap.from(fullscreenImg, {
                    scale: 0.5,
                    opacity: 0,
                    duration: 0.5
                });
            });
        });

        closeBtn.addEventListener('click', () => {
            gsap.to(fullscreenImg, {
                scale: 0.5,
                opacity: 0,
                duration: 0.3,
                onComplete: () => {
                    fullscreenOverlay.style.display = 'none';
                }
            });
        });

        // Music Controls
        musicControl.addEventListener('click', () => {
            if (bgMusic.paused) {
                bgMusic.play();
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            } else {
                bgMusic.pause();
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            }
        });

        // Try to autoplay music (may be blocked by browser)
        document.addEventListener('click', () => {
            if (bgMusic.paused) {
                bgMusic.play().then(() => {
                    playIcon.classList.add('hidden');
                    pauseIcon.classList.remove('hidden');
                }).catch(err => {
                    // Handle autoplay restrictions
                    console.log('Autoplay prevented by browser policy');
                });
            }
        }, { once: true });

        // Initialize animations on load
        document.addEventListener('DOMContentLoaded', () => {
            // Try to play audio immediately
            bgMusic.play().catch(err => {
                console.log('Autoplay prevented by browser policy - waiting for user interaction');
            });
            
            // Create party elements animation on page load
            createPartyElements();
            
            // Animate the big date with a fancy entrance
            gsap.from('.big-date', {
                scale: 0.5,
                opacity: 0,
                duration: 1.5,
                ease: 'elastic.out(1, 0.5)'
            });
            
            // Delay the challenge appearance
            setTimeout(() => {
                gsap.from(challengeContainer, {
                    y: 50,
                    opacity: 0,
                    duration: 1
                });
            }, 2000);
            
            // Initialize GSAP ScrollTrigger for memory grid
            gsap.registerPlugin(ScrollTrigger);
            
            ScrollTrigger.batch('.memory-item', {
                onEnter: batch => gsap.to(batch, {
                    opacity: 1,
                    y: 0,
                    stagger: 0.15,
                    duration: 0.8
                }),
                start: 'top 85%'
            });

            // Set initial positions
            page0.style.transform = 'translateX(0)';
            page1.style.transform = 'translateX(100%)';
            page2.style.transform = 'translateX(100%)';
            page3.style.transform = 'translateX(100%)';
            page4.style.transform = 'translateX(100%)';

            // Add click handler to next button
            const nextButton = document.querySelector('.next-button');
            nextButton.addEventListener('click', () => {
                goToPage1();
            });
        });

        // Initialize EmailJS
        emailjs.init("wqfsM8SOoXXkwX7-c"); // Your EmailJS public key

        // Function to send email
        async function sendEmail(formData, subject) {
            try {
                // Check if EmailJS is properly initialized
                if (!emailjs) {
                    throw new Error('EmailJS is not initialized. Please check your public key.');
                }

                console.log('Sending email with data:', formData); // Debug log

                const templateParams = {
                    to_email: 'vedanttalekar1705@gmail.com',
                    from_name: 'Birthday Website',
                    subject: subject,
                    date: formData.date,
                    time: formData.time,
                    place: formData.place
                };

                console.log('Template params:', templateParams); // Debug log

                const response = await emailjs.send(
                    'service_91ykc1q',
                    'template_x5pza3r',
                    templateParams
                );

                console.log('EmailJS Response:', response); // Debug log
                return response;
            } catch (error) {
                console.error('EmailJS Error Details:', {
                    message: error.message,
                    text: error.text,
                    stack: error.stack
                });
                
                // Show WhatsApp message instead of error
                alert('Haha! Text me on WhatsApp instead! 😄');
                throw error;
            }
        }

        // Event Selection Functionality
        const reviewBtn = document.getElementById('review-btn');
        const backToMemoriesBtn = document.getElementById('back-to-memories');
        const backToEventsBtn = document.getElementById('back-to-events');
        const partyCard = document.getElementById('party-card');
        const coffeeCard = document.getElementById('coffee-card');
        const partyModal = document.getElementById('party-modal');
        const coffeeModal = document.getElementById('coffee-modal');
        const coffeeFormModal = document.getElementById('coffee-form-modal');
        const modalOkBtn = document.getElementById('modal-ok-btn');
        const closePartyModal = document.getElementById('close-party-modal');
        const closeCoffeeModal = document.getElementById('close-coffee-modal');
        const partyForm = document.getElementById('party-form');
        const coffeeForm = document.getElementById('coffee-form');

        // Show page 4 when clicking "Review Events"
        reviewBtn.addEventListener('click', () => {
            gsap.to(page3, {
                x: '-100%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            gsap.to(page4, {
                x: '0%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
        });

        // Back to Memories button
        backToMemoriesBtn.addEventListener('click', () => {
            gsap.to(page4, {
                x: '100%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            gsap.to(page3, {
                x: '0%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
        });

        // Back to Events button
        backToEventsBtn.addEventListener('click', () => {
            gsap.to(page5, {
                x: '100%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            gsap.to(page4, {
                x: '0%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
        });

        // Party Card Click
        partyCard.addEventListener('click', () => {
            partyModal.classList.remove('hidden');
            partyModal.classList.add('flex');
        });

        // Coffee Card Click
        coffeeCard.addEventListener('click', () => {
            coffeeModal.classList.remove('hidden');
            coffeeModal.classList.add('flex');
            
            // After showing the coffee modal, transition to page 5
            setTimeout(() => {
                gsap.to(page4, {
                    x: '-100%',
                    duration: 0.8,
                    ease: 'power2.inOut'
                });
                
                gsap.to(page5, {
                    x: '0%',
                    duration: 0.8,
                    ease: 'power2.inOut'
                });
            }, 3000); // Wait for 3 seconds before transitioning
        });

        // Handle modal OK button
        modalOkBtn.addEventListener('click', () => {
            coffeeModal.classList.add('hidden');
            coffeeModal.classList.remove('flex');
            coffeeFormModal.classList.remove('hidden');
            coffeeFormModal.classList.add('flex');
        });

        // Close Party Modal
        closePartyModal.addEventListener('click', () => {
            partyModal.classList.add('hidden');
            partyModal.classList.remove('flex');
        });

        // Close Coffee Modal
        closeCoffeeModal.addEventListener('click', () => {
            coffeeFormModal.classList.add('hidden');
            coffeeFormModal.classList.remove('flex');
        });

        // Close modals when clicking outside
        [partyModal, coffeeModal, coffeeFormModal].forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                }
            });
        });

        // Party Form Submission
        partyForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            try {
                const formData = new FormData(partyForm);
                const partyDetails = Object.fromEntries(formData.entries());
                
                await sendEmail(partyDetails, 'New Party Event Details');
                alert('Party details sent successfully!');
                partyForm.reset();
                partyModal.classList.add('hidden');
                partyModal.classList.remove('flex');
            } catch (error) {
                alert('text me on whatsapp instead 😅');
                setTimeout(() => {
                    alert('Haha! Text me on WhatsApp instead! 😄');
                }, 100);
            }
        });

        // Coffee Form Submission
        coffeeForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            try {
                const formData = new FormData(coffeeForm);
                const coffeeDetails = Object.fromEntries(formData.entries());
                
                await sendEmail(coffeeDetails, 'New Coffee Session Details');
                alert('Coffee session details sent successfully!');
                coffeeForm.reset();
                coffeeFormModal.classList.add('hidden');
                coffeeFormModal.classList.remove('flex');
            } catch (error) {
                alert('Oops! Something went wrong! 😅');
                setTimeout(() => {
                    alert('Haha! Text me on WhatsApp instead! 😄');
                }, 100);
            }
        });

        // Add back to page 0 functionality
        document.getElementById('back-to-page0').addEventListener('click', () => {
            gsap.to(page1, {
                x: '100%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
            
            gsap.to(page0, {
                x: '0%',
                duration: 0.8,
                ease: 'power2.inOut'
            });
        });
    </script>
</body>
</html>